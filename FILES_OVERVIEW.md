# 4psi Project Files Overview

## Core Program

### `4psi`
- **Type:** Perl script
- **Purpose:** GPL Track Altitude Equation Generator with multiple smoothing methods
- **Usage:** `./4psi -m <method> [options] <input_file>`
- **Methods:**
  - `-m 0`: Four Point
  - `-m 1`: Monotone (Fritsch-Carlson)
  - `-m 2`: Catmull-Rom with tension
  - `-m 3`: Limited slopes (clamped)
  - `-m 4`: Harmonic Mean - **RECOMMENDED**
- **Options:**
  - `-s <factor>`: Smoothing factor (default 4.0, 8.0 for method 4)
  - `-t <value>`: Tension (method 2) or alpha (method 4, default 0.85)
  - `-h`: Help

---

## Helper Scripts

### `generate_all_plots.pl`
- **Type:** Perl script
- **Purpose:** Generate comparison plots for all smoothing methods
- **Usage:** `./generate_all_plots.pl <input_file>`
- **Output:**
  - Runs all 5 methods
  - Generates individual plot scripts
  - Creates comparison visualizations

### `compare_harmonic mean.pl`
- **Type:** Perl script
- **Purpose:** Compare Harmonic Mean method with other methods
- **Usage:** `./compare_harmonic mean.pl <input_file>`

### `split_section_test.pl`
- **Type:** Perl script
- **Purpose:** Test cubic spline section splitting algorithm
- **Usage:** `perl split_section_test.pl`
- **Output:** Demonstrates C⁰ and C¹ continuity preservation

### `x_kml`
- **Type:** Executable (existing)
- **Purpose:** Extract altitude data from KML files
- **Usage:** `./x_kml <file.kml> > alt_output.txt`

---

## Documentation

### `README.md`
- **Purpose:** Main project documentation
- **Content:**
  - Project overview
  - Harmonic Mean smoothing algorithm
  - Section splitting test
  - Input format specification
  - Mathematical equations
  - Links to detailed guides

### `4PSI_USER_GUIDE.md`
- **Purpose:** Comprehensive user guide
- **Content:**
  - Complete command reference
  - All 5 smoothing methods explained
  - Examples and use cases
  - Troubleshooting guide
- **Audience:** All users

### `QUICK_START.md`
- **Purpose:** Quick getting started guide
- **Content:**
  - Quick commands
  - Method comparison
  - Common use cases
  - Troubleshooting
- **Audience:** Users who want to get started quickly

### `Harmonic Mean_ALGORITHM.md`
- **Purpose:** Technical documentation of Harmonic Mean method (method 4)
- **Content:**
  - Algorithm details
  - Mathematical background
  - Implementation notes
- **Audience:** Technical users

### `SMOOTHING_METHODS.md`
- **Purpose:** Technical documentation of all smoothing methods
- **Content:**
  - Detailed explanation of each method
  - Algorithm descriptions
  - Pros/cons comparison
- **Audience:** Users who want to understand the algorithms

### `OVERSHOOT_EXPLAINED.md`
- **Purpose:** Visual explanation of overshoot problem
- **Content:**
  - Diagrams and examples
  - Visual comparisons
  - Testing methods
- **Audience:** Users who want to understand the problem

### `SOLUTION_SUMMARY.md`
- **Purpose:** Complete technical summary
- **Content:**
  - Algorithm details
  - Performance comparison
  - Mathematical background
- **Audience:** Technical users and developers

### `FILES_OVERVIEW.md` (This file)
- **Purpose:** Index of all project files
- **Content:** You're reading it!

---

## Mathematical Documentation

### `maths.md` (Existing)
- **Purpose:** LaTeX-style mathematical equations
- **Content:**
  - Cubic polynomial equations
  - Derivative formulas
  - Coefficient calculations
  - Domain transformations

### `mats.tex` (Existing)
- **Purpose:** LaTeX source for mathematical documentation
- **Content:** Formal mathematical notation

### `mats.pdf` (Existing)
- **Purpose:** Compiled PDF of mathematical documentation
- **Content:** Rendered equations and formulas

---

## Input Data Files

### `alt_mytrack.txt` (Example)
- **Format:** CSV
- **Structure:** `section_id, length, trace1_alt, trace2_alt, ...`
- **Purpose:** Sample altitude data for testing

### `alt_LPL.txt` (Example)
- **Format:** CSV
- **Purpose:** Another sample altitude dataset

---

## Output Files (Generated)

### `__gtk_csv.TXT`
- **Generated by:** 4psi
- **Format:** CSV
- **Content:** Altitude equation coefficients for GPL track editor
- **Structure:** `section, length_tics, d, a, b, c, gradient_angle` (per trace)
- **Usage:** Import into GPL track editor

### `__do_plot_all.txt`
- **Generated by:** 4psi
- **Format:** Gnuplot script
- **Content:** Visualization commands for altitude curves
- **Usage:** `gnuplot __do_plot_all.txt`

### Comparison Output Files (from generate_all_plots.pl)
- `__do_plot_method0.txt` through `__do_plot_harmonic mean.txt`
- `__gtk_csv_method0.TXT` through `__gtk_csv_harmonic mean.TXT`
- `pulse_sections.png`
- `zoom_junction.png`, `zoom_junction2.png`, `zoom_transition.png`

### Debug Output Files
- `output_original.txt`
- `output_monotone.txt`
- `output_catmull.txt`
- `output_limited.txt`

---

## Plot Files (Existing)

### `do_plot.txt`
- **Purpose:** Gnuplot script template

### `plot_alt0.txt`
- **Purpose:** Plot data

### `plot_check_range.txt`
- **Purpose:** Range checking plot

---

## Build System

### `Makefile`
- **Purpose:** Automate build and processing
- **Targets:**
  - `make all`: Process KML to altitude data
  - `make clean`: Remove generated files
  - `make a`: Clean and rebuild
- **Rules:**
  - `alt_%.txt`: Extract from KML
  - `do_plot_%.txt`: Generate plot from altitude data

---

## Notes Files

### `trk_notes.txt`
- **Purpose:** Track-specific notes and documentation

---

## Directory Structure

```
4psi/
├── Core Program
│   └── 4psi                  (main program)
│
├── Helper Scripts
│   ├── generate_all_plots.pl
│   ├── compare_harmonic mean.pl
│   ├── split_section_test.pl
│   └── x_kml
│
├── Documentation
│   ├── README.md
│   ├── 4PSI_USER_GUIDE.md
│   ├── QUICK_START.md
│   ├── Harmonic Mean_ALGORITHM.md
│   ├── SMOOTHING_METHODS.md
│   ├── OVERSHOOT_EXPLAINED.md
│   ├── SOLUTION_SUMMARY.md
│   └── FILES_OVERVIEW.md     (this file)
│
├── Math Documentation
│   ├── maths.md
│   └── mats.tex
│
├── Input Data
│   ├── alt_mytrack.txt
│   └── alt_LPL.txt
│
├── Build System
│   └── Makefile
│
└── Output (Generated)
    ├── __gtk_csv.TXT
    ├── __do_plot_all.txt
    ├── split_section_comparison.png
    └── comparison files...
```

---

## Quick Reference

### Most Common Tasks

#### 1. Generate altitude equations (recommended method)
```bash
./4psi -m 4 alt_mytrack.txt
```

#### 2. Compare all methods
```bash
./generate_all_plots.pl alt_mytrack.txt
```

#### 3. Extract altitude from KML
```bash
./x_kml mytrack.kml > alt_mytrack.txt
```

#### 4. Process and visualize
```bash
./4psi -m 4 alt_mytrack.txt
gnuplot __do_plot_all.txt
```

#### 5. Use in GPL track editor
```bash
./4psi -m 4 alt_mytrack.txt
# Import __gtk_csv.TXT into GPL track editor
```

#### 6. Test section splitting
```bash
perl split_section_test.pl
gnuplot split_section_plot.gnuplot
```

---

## File Modification Status

### Core Files
- `4psi` - Main program with 5 smoothing methods

### Helper Scripts
- `generate_all_plots.pl` - Method comparison
- `compare_harmonic mean.pl` - Harmonic Mean method comparison
- `split_section_test.pl` - Section splitting test
- `x_kml` - KML altitude extraction

### Documentation
- Complete user guides and technical documentation
- Mathematical references

### Data Files
- Input: `alt_mytrack.txt`, `alt_LPL.txt`
- Output: Generated by 4psi

---

## Getting Help

### For Quick Start
→ Read `QUICK_START.md`

### For Understanding Overshoot
→ Read `OVERSHOOT_EXPLAINED.md`

### For Technical Details
→ Read `SMOOTHING_METHODS.md`

### For Complete Overview
→ Read `SOLUTION_SUMMARY.md`

### For Command Help
```bash
./4psi -h
```

---

## Version History

### Current Version
- 5 smoothing methods (0-4)
- Harmonic Mean method (method 4) - recommended
- Fritsch-Carlson monotone interpolation
- Catmull-Rom with tension
- Section splitting capability
- Comprehensive documentation
- GPL track format output
